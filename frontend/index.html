<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho de Compras</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            padding: 30px;
        }

        .total-box {
            font-size: 1.3em;
            font-weight: bold;
        }

        .quantidade {
            width: 70px;
            text-align: center;
        }

        #mensagem-compra {
            display: none;
            font-weight: bold;
            font-size: 1.1em;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="mb-4 text-center">ðŸ›’ Carrinho de Compras</h1>

        <!-- Lista de produtos -->
        <div class="card mb-4">
            <div class="card-header">Produtos</div>
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span>Camisa Azul - R$ 50,00</span>
                    <div class="d-flex gap-2">
                        <input type="number" id="qtd-camisa" class="form-control quantidade" min="1" value="1">
                        <button class="btn btn-primary btn-sm" id="btn-add-camisa">Adicionar</button>
                    </div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <span>TÃªnis Esportivo - R$ 200,00</span>
                    <div class="d-flex gap-2">
                        <input type="number" id="qtd-tenis" class="form-control quantidade" min="1" value="1">
                        <button class="btn btn-primary btn-sm" id="btn-add-tenis">Adicionar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Carrinho -->
        <div class="card mb-4">
            <div class="card-header">Carrinho</div>
            <div class="card-body">
                <ul id="itens-carrinho" class="list-group mb-3"></ul>

                <div class="mb-3">
                    <label for="cep" class="form-label">CEP para calcular frete</label>
                    <input type="text" id="cep" class="form-control" placeholder="Digite o CEP">
                    <button class="btn btn-outline-secondary mt-2" id="btn-frete">Calcular Frete</button>
                </div>

                <div class="total-box mb-3">
                    Total: R$ <span id="total">0</span>
                </div>

                <div class="d-flex gap-2">
                    <button class="btn btn-danger" id="btn-limpar">Limpar Carrinho</button>
                    <button class="btn btn-success" id="btn-comprar">Comprar</button>
                </div>

                <div id="mensagem-compra" class="text-success mt-3">
                    Compra realizada com sucesso!
                </div>
            </div>
        </div>
    </div>

    <script>
        const produtos = {
            camisa: { nome: "Camisa Azul", preco: 50 },
            tenis: { nome: "TÃªnis Esportivo", preco: 200 }
        };

        let carrinho = [];
        let frete = 0;

        const lista = document.getElementById("itens-carrinho");
        const qtds = document.querySelectorAll('.form-control.quantidade');
        const totalEl = document.getElementById("total");
        const cep = document.getElementById("cep");
        const msgCompra = document.getElementById("mensagem-compra");

        function atualizarCarrinho() {
            lista.innerHTML = "";
            carrinho.forEach((item, index) => {
                const li = document.createElement("li");
                li.classList.add("list-group-item", "d-flex", "justify-content-between");
                li.innerHTML = `
          ${item.qtd}x ${item.nome} - R$ ${(item.preco * item.qtd).toFixed(2)}
          <button class="btn btn-sm btn-outline-danger" data-index="${index}">Remover</button>
        `;
                lista.appendChild(li);
            });
            totalEl.textContent = (
                carrinho.reduce((t, p) => t + p.preco * p.qtd, 0) + frete
            ).toFixed(2);
        }

        document.getElementById("btn-add-camisa").onclick = () => {
            const qtd = parseInt(document.getElementById("qtd-camisa").value) || 1;
            carrinho.push({ ...produtos.camisa, qtd });
            atualizarCarrinho();
        };

        document.getElementById("btn-add-tenis").onclick = () => {
            const qtd = parseInt(document.getElementById("qtd-tenis").value) || 1;
            carrinho.push({ ...produtos.tenis, qtd });
            atualizarCarrinho();
        };

        lista.addEventListener("click", (e) => {
            if (e.target.tagName === "BUTTON") {
                const idx = e.target.dataset.index;
                carrinho.splice(idx, 1);
                atualizarCarrinho();
            }
        });

        document.getElementById("btn-frete").onclick = () => {
            const cepValue = cep.value.trim();
            if (!cepValue) {
                alert("Informe um CEP vÃ¡lido!");
                return;
            }

            // RegiÃµes simuladas
            if (cepValue.startsWith("69")) frete = 50;       // Norte
            else if (cepValue.startsWith("40")) frete = 40;  // Nordeste
            else if (cepValue.startsWith("70")) frete = 30;  // Centro-Oeste
            else if (cepValue.startsWith("28")) frete = 20;  // Sudeste
            else if (cepValue.startsWith("90")) frete = 25;  // Sul
            else frete = 0;

            atualizarCarrinho();
        };

        document.getElementById("btn-limpar").onclick = () => {
            carrinho = [];
            frete = 0;
            cep.value = "";
            msgCompra.style.display = "none";
            qtds.forEach(input => input.value = 1);
            atualizarCarrinho();
        };

        document.getElementById("btn-comprar").onclick = () => {
            if (carrinho.length === 0) {
                alert("O carrinho estÃ¡ vazio!");
                return;
            }

            if (cep.value == "") {
                alert("O CEP estÃ¡ vazio!");
                return;
            }
            msgCompra.style.display = "block";
        };

        atualizarCarrinho();
    </script>
</body>

</html>